--- origsrc/kaffeine/src/CMakeLists.txt	2009-07-28 12:04:30.000000000 -0500
+++ src/kaffeine/src/CMakeLists.txt	2009-07-28 12:42:11.233696400 -0500
@@ -18,8 +18,10 @@ set(kaffeine_SRCS
     osdwidget.cpp
     proxytreeview.cpp)
 
+if(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
 set(kaffeinedvbmodule_SRCS
     dvb/dvbdevice_linux.cpp)
+endif(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
 
 set(kaffeinedvbdebugmodule_SRCS
     dvb/dvbdevice_debug.cpp)
@@ -32,9 +34,11 @@ install(TARGETS kaffeine ${INSTALL_TARGE
 install(FILES scanfile.dvb DESTINATION ${DATA_INSTALL_DIR}/kaffeine)
 install(FILES kaffeine.desktop DESTINATION ${XDG_APPS_INSTALL_DIR})
 
-kde4_add_plugin(kaffeinedvb ${kaffeinedvbmodule_SRCS})
-target_link_libraries(kaffeinedvb ${KDE4_KDECORE_LIBRARY} ${KDE4_SOLID_LIBS})
-install(TARGETS kaffeinedvb DESTINATION ${PLUGIN_INSTALL_DIR})
+if(kaffeinedvbmodule_SRCS)
+  kde4_add_plugin(kaffeinedvb ${kaffeinedvbmodule_SRCS})
+  target_link_libraries(kaffeinedvb ${KDE4_KDECORE_LIBRARY} ${KDE4_SOLID_LIBS})
+  install(TARGETS kaffeinedvb DESTINATION ${PLUGIN_INSTALL_DIR})
+endif(kaffeinedvbmodule_SRCS)
 
 if(BUILD_DEBUG_MODULE)
   kde4_add_plugin(kaffeinedvbdebug ${kaffeinedvbdebugmodule_SRCS})
